@model Trackii.Models.Admin.Family.FamilyListVm

<h2>Families</h2>

<form method="get" action="/Admin/Family">
    <select name="areaId">
        <option value="">-- Área --</option>
        @foreach (var a in Model.Areas)
        {
            if (Model.AreaId == a.Id)
            {
                <option value="@a.Id" selected>@a.Name</option>
            }
            else
            {
                <option value="@a.Id">@a.Name</option>
            }
        }
    </select>

    <input name="search" value="@Model.Search" placeholder="Buscar..." />

    <label>
        <input type="checkbox" name="showInactive" value="true"
               @(Model.ShowInactive ? "checked" : "") />
        Ver inactivos
    </label>

    <button type="submit">Filtrar</button>
    <a href="/Admin/Family/Create">Nuevo</a>
</form>

@if (TempData["Error"] != null)
{
    <div style="color:red; font-weight:bold;">
        @TempData["Error"]
    </div>
}

<table border="1" cellpadding="5">
    <tr>
        <th>Área</th>
        <th>Nombre</th>
        <th>Activo</th>
        <th></th>
    </tr>
@foreach (var f in Model.Items)
{
    <tr>
        <td>@f.AreaName</td>
        <td>@f.Name</td>
        <td>@f.Active</td>
        <td>
            <a href="/Admin/Family/Edit/@f.Id">Editar</a>
            <form action="/Admin/Family/Toggle" method="post" style="display:inline">
                @Html.AntiForgeryToken()
                <input type="hidden" name="id" value="@f.Id" />
                    <input type="hidden" name="active" value="@(f.Active ? 0 : 1)" />
                    <button type="submit">
                    @(f.Active ? "Desactivar" : "Activar")
                </button>
            </form>
        </td>
    </tr>
}
</table>

@if (Model.TotalPages > 1)
{
    <div>
@for (int i = 1; i <= Model.TotalPages; i++)
{
    if (i == Model.Page)
    {
        <strong>@i</strong>
    }
    else
    {
        <a href="/Admin/Family?page=@i&areaId=@Model.AreaId&search=@Model.Search&showInactive=@Model.ShowInactive">@i</a>
    }
}
    </div>
}
